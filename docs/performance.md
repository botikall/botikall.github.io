# Performance Profiling Report

## Мета

Провести базовий аналіз продуктивності вебсистеми оформлення замовлень кондитерських виробів за допомогою `django-debug-toolbar` з фокусом на запити до бази даних та час виконання.

---

## Методологія

1. Встановлено та налаштовано `django-debug-toolbar`.
2. Проведено ручне тестування сторінок `/order/`, `/order/submit/`, `/order/edit`.
3. Зібрано дані з панелі профілювання:
   - Час генерації сторінки
   - Кількість SQL-запитів
   - Ідентифіковано типові проблеми (N+1, дублікати, повільна логіка)

---

## Зібрані дані

| Сторінка / Функція      | Час (мс) | SQL-запити | Проблеми                                  |
|-------------------------|----------|------------|-------------------------------------------|
| `/order/`               | 723      | 17         | N+1 запити до категорій (ForeignKey)    |
| `/order/submit/`        | 824      | 8          | Повільна логіка обробки замовлення      |
| `/order/edit/`          | 450      | 12         | Дублі запитів до пов’язаних моделей     |

---

## Виявлені "гарячі точки"

### 1. Каталог продукції (`/order/`)
- **Проблема:** Використання `ForeignKey` до `Category` без попереднього `select_related()`.
- **Наслідок:** Кожен продукт викликає окремий запит для своєї категорії → N+1 запити.
- **Рішення:** Використати `Product.objects.select_related('category')`.

---

### 2. Обробка замовлення (`/order/submit/`)
- **Проблема:** Індивідуальна логіка валідації займає ~800 мс.
- **Причини:**
  - Складні умови перевірки
  - Дублікати викликів функцій
- **Рішення:**
  - Винести обчислення з циклів
  - Кешування проміжних результатів

---

### 3. Редагування замовлення (`/order/edit/`)
- **Проблема:** Повторні запити до зображень та пов’язаних моделей
- **Причини:**
  - Не використовується `prefetch_related()` для багатьох об’єктів
- **Рішення:** Оптимізувати ORM-запити з `prefetch_related('images')`
